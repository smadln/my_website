<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Prairie Sunset VR</title>
    <!-- Include A-Frame library -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <!-- Include Gradient Sky Shader -->
    <script src="https://unpkg.com/aframe-gradient-sky@1.1.3/dist/gradientsky.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Assets -->
      <a-assets>
        <!-- Grass Texture -->
        <img id="grassTexture" src="https://cdn.glitch.global/1b5e9cc6-133e-4af8-9cd2-838e44d1dc1a/grass.jpg?v=1666384357951">
        <!-- Grass Model -->
        <a-asset-item id="grassModel" src="https://cdn.glitch.global/1b5e9cc6-133e-4af8-9cd2-838e44d1dc1a/grass.gltf?v=1666384363714"></a-asset-item>
      </a-assets>

      <!-- Sky -->
      <a-sky material="shader: gradientsky; topColor: #FFB347; bottomColor: #FFCC33;"></a-sky>

      <!-- Ground -->
      <a-plane src="#grassTexture" rotation="-90 0 0" width="100" height="100" repeat="100 100"></a-plane>

      <!-- Grass Field -->
      <a-entity id="grass-field"></a-entity>

      <!-- Camera -->
      <a-entity camera look-controls wasd-controls position="0 1.6 0"></a-entity>
    </a-scene>

    <!-- Scatter Grass Script -->
    <script>
      AFRAME.registerComponent('scatter-grass', {
        init: function () {
          const grassField = document.querySelector('#grass-field');
          const grassModelURL = '#grassModel'; // Using the preloaded asset
          const grassCount = 500; // Adjust the number of grass instances
          for (let i = 0; i < grassCount; i++) {
            const grass = document.createElement('a-entity');
            const x = (Math.random() - 0.5) * 100;
            const z = (Math.random() - 0.5) * 100;
            const yRotation = Math.random() * 360;
            grass.setAttribute('position', { x: x, y: 0, z: z });
            grass.setAttribute('rotation', { x: 0, y: yRotation, z: 0 });
            grass.setAttribute('scale', '1 1 1');
            grass.setAttribute('gltf-model', grassModelURL);
            grassField.appendChild(grass);
          }
        }
      });

      // Attach the component to the grass-field entity
      document.querySelector('#grass-field').setAttribute('scatter-grass', '');
    </script>
  </body>
</html>